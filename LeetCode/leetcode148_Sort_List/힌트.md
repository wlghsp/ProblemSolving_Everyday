# LeetCode 148. Sort List - ì´ˆë³´ì íŒíŠ¸

## ë¬¸ì œ ìš”ì•½
ì—°ê²° ë¦¬ìŠ¤íŠ¸(Linked List)ë¥¼ **ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬**í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.
- ì…ë ¥: `4 -> 2 -> 1 -> 3`
- ì¶œë ¥: `1 -> 2 -> 3 -> 4`

### ì˜ˆì‹œ
```
ì…ë ¥: [4,2,1,3]
ì¶œë ¥: [1,2,3,4]

ì…ë ¥: [-1,5,3,4,0]
ì¶œë ¥: [-1,0,3,4,5]

ì…ë ¥: []
ì¶œë ¥: []
```

### ì œì•½ ì¡°ê±´
- ë…¸ë“œ ê°œìˆ˜: 0 ~ 50,000
- ë…¸ë“œ ê°’: -100,000 ~ 100,000

---

## ğŸ’¡ í•µì‹¬ ì•„ì´ë””ì–´

ì—°ê²° ë¦¬ìŠ¤íŠ¸ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì •ë ¬í•˜ë ¤ë©´ **Merge Sort**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤!

**ì™œ Merge Sortì¸ê°€?**
- ë°°ì—´ì˜ Quick SortëŠ” O(n log n)ì´ì§€ë§Œ ì—°ê²° ë¦¬ìŠ¤íŠ¸ì—ì„  ë¹„íš¨ìœ¨ì 
- Merge SortëŠ” ì—°ê²° ë¦¬ìŠ¤íŠ¸ì™€ ê¶í•©ì´ ì¢‹ìŒ (ìˆœì°¨ ì ‘ê·¼)
- ì‹œê°„: O(n log n), ê³µê°„: O(log n) (ì¬ê·€ ìŠ¤íƒ)

**ğŸ“– ë³‘í•©ì •ë ¬ì´ ì²˜ìŒì´ë¼ë©´?**
> **[ë³‘í•©ì •ë ¬_ê°€ì´ë“œ.md](ë³‘í•©ì •ë ¬_ê°€ì´ë“œ.md)** ë¬¸ì„œë¥¼ ë¨¼ì € ì½ì–´ë³´ì„¸ìš”!
> - ë°°ì—´ ë³‘í•©ì •ë ¬ë¶€í„° ë‹¨ê³„ë³„ ì„¤ëª…
> - ë°°ì—´ vs ì—°ê²° ë¦¬ìŠ¤íŠ¸ ë¹„êµ
> - ìì£¼í•˜ëŠ” ì‹¤ìˆ˜ì™€ ë””ë²„ê¹… íŒ

---

## ğŸ”‘ í•´ê²° ì „ëµ

### 1ë‹¨ê³„: Merge Sort ê°œë… ì´í•´

**ë¶„í•  ì •ë³µ (Divide and Conquer):**
```
[4 -> 2 -> 1 -> 3]
      â†“ (ì¤‘ê°„ ì°¾ê¸°)
[4 -> 2]  [1 -> 3]
      â†“ (ì¬ê·€ ë¶„í• )
[4]  [2]  [1]  [3]
      â†“ (ë³‘í•©)
[2 -> 4]  [1 -> 3]
      â†“ (ë³‘í•©)
[1 -> 2 -> 3 -> 4]
```

### 2ë‹¨ê³„: í•„ìš”í•œ í•µì‹¬ ê¸°ëŠ¥

**â‘  ì¤‘ê°„ ë…¸ë“œ ì°¾ê¸° (Slow & Fast Pointer)**
```python
def get_mid(head):
    slow = head
    fast = head.next  # fastë¥¼ í•œ ì¹¸ ì•ì„œ ì‹œì‘

    while fast and fast.next:
        slow = slow.next
        fast = fast.next.next

    return slow
```

**ì™œ fastë¥¼ í•œ ì¹¸ ì•ì„œ ì‹œì‘?**
- ë¦¬ìŠ¤íŠ¸ë¥¼ ì •í™•íˆ ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ìœ„í•´
- ì˜ˆ: [1,2] â†’ slowëŠ” 1ì—ì„œ ë©ˆì¶¤ (1ê°œ | 1ê°œë¡œ ë¶„í• )

**â‘¡ ë‘ ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸ ë³‘í•©**
```python
def merge(l1, l2):
    dummy = ListNode(0)
    tail = dummy

    while l1 and l2:
        if l1.val < l2.val:
            tail.next = l1
            l1 = l1.next
        else:
            tail.next = l2
            l2 = l2.next
        tail = tail.next

    # ë‚¨ì€ ë…¸ë“œ ì—°ê²°
    tail.next = l1 if l1 else l2

    return dummy.next
```

### 3ë‹¨ê³„: Merge Sort êµ¬í˜„

```python
def sortList(head):
    # ë² ì´ìŠ¤ ì¼€ì´ìŠ¤: ë…¸ë“œ 0ê°œ or 1ê°œ
    if not head or not head.next:
        return head

    # 1. ì¤‘ê°„ ì°¾ê¸°
    mid = get_mid(head)

    # 2. ë¦¬ìŠ¤íŠ¸ ë¶„í• 
    right = mid.next
    mid.next = None  # ì™¼ìª½ ë ì ˆë‹¨!

    # 3. ì¬ê·€ë¡œ ì •ë ¬
    left = sortList(head)
    right = sortList(right)

    # 4. ë³‘í•©
    return merge(left, right)
```

---

## ğŸ¯ ë‹¨ê³„ë³„ ë™ì‘ ì˜ˆì‹œ

**ì…ë ¥: [4 -> 2 -> 1 -> 3]**

```
1ë‹¨ê³„: ì¤‘ê°„ ì°¾ê¸° (mid = 2)
[4 -> 2] | [1 -> 3]

2ë‹¨ê³„: ì¬ê·€ ë¶„í• 
[4] [2] | [1] [3]

3ë‹¨ê³„: ë³‘í•© ì‹œì‘
[2 -> 4] | [1 -> 3]

4ë‹¨ê³„: ìµœì¢… ë³‘í•©
[1 -> 2 -> 3 -> 4]
```

---

## ğŸ“ ì „ì²´ ì½”ë“œ êµ¬ì¡°

```python
class Solution:
    def sortList(self, head: Optional[ListNode]) -> Optional[ListNode]:
        # ë² ì´ìŠ¤ ì¼€ì´ìŠ¤
        if not head or not head.next:
            return head

        # ì¤‘ê°„ ë…¸ë“œ ì°¾ê¸°
        mid = self.get_mid(head)
        right = mid.next
        mid.next = None

        # ì¬ê·€ ì •ë ¬
        left = self.sortList(head)
        right = self.sortList(right)

        # ë³‘í•©
        return self.merge(left, right)

    def get_mid(self, head):
        slow = head
        fast = head.next

        while fast and fast.next:
            slow = slow.next
            fast = fast.next.next

        return slow

    def merge(self, l1, l2):
        dummy = ListNode(0)
        tail = dummy

        while l1 and l2:
            if l1.val < l2.val:
                tail.next = l1
                l1 = l1.next
            else:
                tail.next = l2
                l2 = l2.next
            tail = tail.next

        tail.next = l1 if l1 else l2

        return dummy.next
```

---

## ğŸ¤” ìì£¼í•˜ëŠ” ì‹¤ìˆ˜

### 1. ì¤‘ê°„ ë…¸ë“œë¥¼ ëŠì§€ ì•ŠìŒ
```python
# âŒ ì˜ëª»ëœ ì½”ë“œ
mid = get_mid(head)
right = mid.next
# mid.next = None ì„ ì•ˆ í•¨! â†’ ë¬´í•œ ì¬ê·€

# âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ
mid = get_mid(head)
right = mid.next
mid.next = None  # ë°˜ë“œì‹œ ëŠì–´ì•¼ í•¨!
```

### 2. Fast Pointer ì‹œì‘ ìœ„ì¹˜ ì‹¤ìˆ˜
```python
# âŒ ë‘˜ ë‹¤ ê°™ì€ ìœ„ì¹˜ì—ì„œ ì‹œì‘
slow = head
fast = head  # â†’ [1,2]ì¼ ë•Œ ë¶„í•  ì•ˆ ë¨

# âœ… Fastë¥¼ í•œ ì¹¸ ì•ì„œ ì‹œì‘
slow = head
fast = head.next  # â†’ ì •í™•íˆ ë°˜ìœ¼ë¡œ ë‚˜ëˆ”
```

### 3. Merge í•¨ìˆ˜ì—ì„œ ë‚¨ì€ ë…¸ë“œ ì²˜ë¦¬ ì•ˆ í•¨
```python
# âŒ whileë§Œ ëŒê³  ë
while l1 and l2:
    # ...
# ë‚¨ì€ ë…¸ë“œ ì²˜ë¦¬ ì•ˆ í•¨

# âœ… ë‚¨ì€ ë…¸ë“œ ì—°ê²°
tail.next = l1 if l1 else l2
```

---

## ğŸ¯ ì‹œê°„/ê³µê°„ ë³µì¡ë„

**ì‹œê°„ ë³µì¡ë„: O(n log n)**
- ë¶„í• : log n ë ˆë²¨
- ê° ë ˆë²¨ì—ì„œ ë³‘í•©: O(n)
- ì´: O(n log n)

**ê³µê°„ ë³µì¡ë„: O(log n)**
- ì¬ê·€ í˜¸ì¶œ ìŠ¤íƒ ê¹Šì´ (ê· í˜• ì´ì§„ íŠ¸ë¦¬ í˜•íƒœ)

---

## ğŸ’ª í•µì‹¬ í¬ì¸íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Slow & Fast Pointerë¡œ ì¤‘ê°„ ì°¾ê¸° ì´í•´í–ˆë‚˜ìš”?
- [ ] ì™œ `fast = head.next`ë¡œ ì‹œì‘í•˜ëŠ”ì§€ ì´í•´í–ˆë‚˜ìš”?
- [ ] ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜ìœ¼ë¡œ ë‚˜ëˆŒ ë•Œ `mid.next = None` í–ˆë‚˜ìš”?
- [ ] ë‘ ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸ ë³‘í•© ë¡œì§ ì´í•´í–ˆë‚˜ìš”?
- [ ] ë² ì´ìŠ¤ ì¼€ì´ìŠ¤ ì²˜ë¦¬í–ˆë‚˜ìš”? (ë¹ˆ ë¦¬ìŠ¤íŠ¸, ë…¸ë“œ 1ê°œ)

---

## ğŸ’­ ëŒ€ì•ˆ: ë°°ì—´ ë³€í™˜ ë°©ì‹

**"ê·¸ëƒ¥ ë°°ì—´ë¡œ ë°”ê¿”ì„œ ì •ë ¬í•˜ë©´ ì•ˆ ë¼?"** - ë¬¼ë¡  ê°€ëŠ¥í•©ë‹ˆë‹¤!

### ë°©ë²•: ì—°ê²° ë¦¬ìŠ¤íŠ¸ â†’ ë°°ì—´ â†’ ì •ë ¬ â†’ ì—°ê²° ë¦¬ìŠ¤íŠ¸

```python
def sortList(self, head: Optional[ListNode]) -> Optional[ListNode]:
    # 1. ì—°ê²° ë¦¬ìŠ¤íŠ¸ â†’ ë°°ì—´
    values = []
    curr = head
    while curr:
        values.append(curr.val)
        curr = curr.next

    # 2. ë°°ì—´ ì •ë ¬
    values.sort()  # Python Timsort: O(n log n)

    # 3. ë°°ì—´ â†’ ì—°ê²° ë¦¬ìŠ¤íŠ¸
    if not values:
        return None

    new_head = ListNode(values[0])
    curr = new_head
    for val in values[1:]:
        curr.next = ListNode(val)
        curr = curr.next

    return new_head
```

### ì¥ì  vs ë‹¨ì 

| | ë°°ì—´ ë³€í™˜ ë°©ì‹ | Merge Sort |
|---|---|---|
| **êµ¬í˜„ ë‚œì´ë„** | â­ ë§¤ìš° ì‰¬ì›€ | â­â­â­â­ ì–´ë ¤ì›€ |
| **ì‹œê°„ ë³µì¡ë„** | O(n log n) | O(n log n) |
| **ê³µê°„ ë³µì¡ë„** | **O(n)** âŒ | **O(log n)** âœ… |
| **LeetCode í†µê³¼** | âœ… í†µê³¼ | âœ… í†µê³¼ |
| **Follow-up ë§Œì¡±** | âŒ ì‹¤íŒ¨ | âœ… ì„±ê³µ |
| **ë©´ì ‘ í‰ê°€** | ğŸ”º ê¸°ë³¸ ì ìˆ˜ | âœ… ë§Œì  |

### ì‹¤ì „ ë©´ì ‘ ì „ëµ

**1ë‹¨ê³„: ê°„ë‹¨í•œ í•´ë²•ë¶€í„° ì–¸ê¸‰**
```
ë©´ì ‘ê´€: "ì—°ê²° ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ë ¬í•´ë³´ì„¸ìš”"
ë‹¹ì‹ : "ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ë°°ì—´ë¡œ ë³€í™˜ í›„ ì •ë ¬í•˜ëŠ” ê²ë‹ˆë‹¤.
      ì‹œê°„ì€ O(n log n)ì´ì§€ë§Œ ê³µê°„ì´ O(n) í•„ìš”í•©ë‹ˆë‹¤."
```

**2ë‹¨ê³„: ìµœì í™” ì œì•ˆ**
```
ë‹¹ì‹ : "ë” ë‚˜ì€ ë°©ë²•ì€ Merge Sortë¥¼ ì§ì ‘ ì ìš©í•˜ëŠ” ê²ë‹ˆë‹¤.
      Slow & Fast Pointerë¡œ ì¤‘ê°„ì„ ì°¾ê³ ,
      ì¬ê·€ë¡œ ì •ë ¬ í›„ ë³‘í•©í•˜ë©´ O(log n) ê³µê°„ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤."
```

**3ë‹¨ê³„: êµ¬í˜„**
```python
# Merge Sort êµ¬í˜„ (ìœ„ì˜ ì½”ë“œ)
```

### ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

**ë°°ì—´ ë³€í™˜ ë°©ì‹ ì¶”ì²œ:**
- âœ… ì‹œê°„ì´ ë¶€ì¡±í•  ë•Œ (ì½”ë”© í…ŒìŠ¤íŠ¸ ë§‰íŒ)
- âœ… ì¼ë‹¨ í†µê³¼í•˜ê³  ë‚˜ì¤‘ì— ê°œì„ 
- âœ… í”„ë¡œí† íƒ€ì… ë¹ ë¥´ê²Œ ë§Œë“¤ ë•Œ

**Merge Sort ì¶”ì²œ:**
- âœ… ë©´ì ‘ ìµœì¢… ë‹µì•ˆ
- âœ… ê³µê°„ ë³µì¡ë„ê°€ ì¤‘ìš”í•  ë•Œ
- âœ… í¬ì¸í„° ì¡°ì‘ ëŠ¥ë ¥ ì¦ëª…

### Follow-up ì§ˆë¬¸ ëŒ€ë¹„

LeetCode 148ì˜ Follow-up:
> **Can you sort the linked list in O(n log n) time and O(1) space?**

**ë©´ì ‘ê´€ì´ ë¬¼ìœ¼ë©´:**
```
ë©´ì ‘ê´€: "ê³µê°„ì„ ë” ì¤„ì¼ ìˆ˜ ìˆì„ê¹Œìš”?"
ë‹¹ì‹ : "ë„¤, Bottom-up Merge Sortë¥¼ ì“°ë©´ O(1) ê³µê°„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
      ì¬ê·€ ëŒ€ì‹  ë°˜ë³µë¬¸ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ë˜ëŠ”ë°,
      ì½”ë“œê°€ í›¨ì”¬ ë³µì¡í•´ì§‘ë‹ˆë‹¤."
```

---

## ğŸš€ ì¶”ê°€ ë„ì „ ê³¼ì œ

1. **í•™ìŠµ ë¡œë“œë§µ:**
   - â‘  ë°°ì—´ ë³€í™˜ ë°©ì‹ìœ¼ë¡œ ë¹ ë¥´ê²Œ í†µê³¼
   - â‘¡ ë°°ì—´ ë³‘í•©ì •ë ¬ ë§ˆìŠ¤í„°
   - â‘¢ ì—°ê²° ë¦¬ìŠ¤íŠ¸ ë³‘í•© ì—°ìŠµ (LeetCode 21)
   - â‘£ ì—°ê²° ë¦¬ìŠ¤íŠ¸ ë³‘í•©ì •ë ¬ ì™„ì„±!

2. **Follow-up: O(1) ê³µê°„ ë³µì¡ë„ë¡œ í’€ ìˆ˜ ìˆì„ê¹Œ?**
   - Bottom-up Merge Sort ì‚¬ìš©
   - ì¬ê·€ ëŒ€ì‹  ë°˜ë³µë¬¸ ì‚¬ìš©
   - í›¨ì”¬ ë³µì¡í•˜ì§€ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤!

3. **ê´€ë ¨ ë¬¸ì œ:**
   - LeetCode 21: Merge Two Sorted Lists (ë³‘í•© ì—°ìŠµ)
   - LeetCode 876: Middle of the Linked List (ì¤‘ê°„ ì°¾ê¸° ì—°ìŠµ)
   - LeetCode 206: Reverse Linked List (í¬ì¸í„° ì¡°ì‘ ì—°ìŠµ)

---

## ğŸ’¡ ë””ë²„ê¹… íŒ

ë§‰í˜”ë‹¤ë©´ ì´ë ‡ê²Œ í•´ë³´ì„¸ìš”:
```python
def sortList(head):
    print(f"Sorting: {list_to_array(head)}")

    if not head or not head.next:
        return head

    mid = get_mid(head)
    print(f"Mid value: {mid.val}")

    right = mid.next
    mid.next = None

    left = sortList(head)
    right = sortList(right)

    result = merge(left, right)
    print(f"Merged: {list_to_array(result)}")

    return result
```

í™”ì´íŒ…! Merge SortëŠ” **ë©´ì ‘ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ì•Œê³ ë¦¬ì¦˜**ì…ë‹ˆë‹¤.
ì™„ì „íˆ ì´í•´í•˜ë©´ ì •ë ¬ ë¬¸ì œì˜ ë‹¬ì¸ì´ ë  ê±°ì˜ˆìš”! ğŸ”¥
